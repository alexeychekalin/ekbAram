"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[542],{542:(t,e,a)=>{a.r(e),a.d(e,{default:()=>i});const s={name:"AllClients",data:function(){return{name:"",address:"",address1:"",address2:"",address3:"",email:"",phone:"",contact:"",code:"",ipo:"",results:[],allresults:[],val:"",id:"",checkedName:""}},methods:{checkName:function(){var t=this;""!==this.name&&axios.post("/api/check/client",{name:this.name}).then((function(e){console.log(e),0==e.data.length?t.$data.checkedName="uk-form-success":(t.$data.checkedName="uk-form-danger",UIkit.notification({message:'Клиент с таким "Customer Name" уже существует'}))})).catch((function(t){UIkit.notification({message:t,status:"danger"})}))},getClients:function(){var t=this;axios.get("/api/clients").then((function(e){t.$data.results=e.data,t.$data.allresults=e.data}))},filter:function(t){var e,a=this;if(""===t)this.results=this.allresults;else{this.results=this.allresults;this.results=(e=t,a.$data.results.filter((function(t){return t.name.toLowerCase().indexOf(e.toLowerCase())>-1})))}},show:function(t){UIkit.modal("#modal-change").show(),this.name=t.name,this.address=t.address,this.address1=t.address1,this.address2=t.address2,this.email=t.email,this.phone=t.phone,this.contact=t.contact,this.id=t.id,this.address3=t.address3,this.code=t.code},updateСlients:function(t){var e=this;axios.post("/api/clients/update",{id:this.id,name:this.name,address:this.address,address1:this.address1,address2:this.address2,email:this.email,phone:this.phone,contact:this.contact,address3:this.address3,code:this.code}).then((function(t){UIkit.notification({message:"Клиент обновлен"}),UIkit.modal("#modal-change").hide()})).catch((function(t){t.response.data;UIkit.notification({message:"Ошибка изменения. Обратитесь к администратору"})})).finally((function(){UIkit.modal("#modal-change").hide(),e.getClients()}))},deleteClients:function(t,e){var a=this;axios.post("/api/clients/delete",{id:t,name:"null",address:"null",email:"null",code:"null"}).then((function(t){UIkit.notification({message:"Клиент удален"}),a.results.splice(e,1),a.allresults.splice(e,1)})).catch((function(t){t.response.data;UIkit.notification({message:"Ошибка удаления. У клиента имеются заказы"})})).finally((function(){UIkit.modal("#modal-change").hide(),a.getClients()}))}},mounted:function(){this.getClients()}};const i=(0,a(1900).Z)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uk-width-1-1 uk-padding uk-padding-remove-top"},[a("h1",{staticClass:"uk-text-center"},[t._v("Список всех клиентов")]),t._v(" "),a("div",{attrs:{id:"modal-change","uk-modal":""}},[a("div",{staticClass:"uk-modal-dialog uk-modal-body uk-margin-auto-vertical uk-width-3-4"},[a("div",{staticClass:"uk-margin uk-modal-container-large"},[a("h3",{staticClass:"uk-card-title"},[t._v("Редактирование клиента")]),t._v(" "),a("div",{staticClass:"uk-grid-small",attrs:{"uk-grid":""}},[a("form",{staticClass:"uk-width-1-1",on:{submit:function(e){e.preventDefault(),t.updateСlients()}}},[a("div",{staticClass:"uk-grid-match uk-child-width-1-1@s",attrs:{"uk-grid":""}},[a("div",[a("div",{staticClass:"uk-card-default uk-card-body"},[a("div",{staticClass:"uk-grid-small",attrs:{"uk-grid":""}},[a("div",{staticClass:"uk-width-expand"},[a("label",{staticClass:"uk-form-label"},[t._v("Customer Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"uk-input",class:t.checkedName,attrs:{type:"text",required:"",placeholder:""},domProps:{value:t.name},on:{blur:t.checkName,input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"uk-width-1-4@s"},[a("label",{staticClass:"uk-form-label"},[t._v("Reference number")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"uk-input",attrs:{type:"text",required:"",placeholder:""},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"uk-grid-small",attrs:{"uk-grid":""}},[a("div",{staticClass:"uk-width-1-2@s"},[a("label",{staticClass:"uk-form-label"},[t._v("Bill to Address")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"uk-input",attrs:{type:"text",required:"",placeholder:""},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"uk-width-1-2@s"},[a("label",{staticClass:"uk-form-label"},[t._v("Ship to Address")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.address1,expression:"address1"}],staticClass:"uk-input",attrs:{type:"text",required:"",placeholder:""},domProps:{value:t.address1},on:{input:function(e){e.target.composing||(t.address1=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"uk-grid-small",attrs:{"uk-grid":""}},[a("div",{staticClass:"uk-width-1-3@s"},[a("label",{staticClass:"uk-form-label"},[t._v("E-mail")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"uk-input",attrs:{type:"text",required:"",placeholder:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"uk-width-1-3@s"},[a("label",{staticClass:"uk-form-label"},[t._v("Phone")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"uk-input",attrs:{type:"text",required:"",placeholder:""},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"uk-width-1-3@s"},[a("label",{staticClass:"uk-form-label"},[t._v("Primary Contact")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contact,expression:"contact"}],staticClass:"uk-input",attrs:{type:"text",required:"",placeholder:""},domProps:{value:t.contact},on:{input:function(e){e.target.composing||(t.contact=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"uk-grid-small",attrs:{"uk-grid":""}},[a("div",{staticClass:"uk-width-1-2@s"},[a("label",{staticClass:"uk-form-label"},[t._v("Alternate Ship to")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.address2,expression:"address2"}],staticClass:"uk-input",attrs:{type:"text",placeholder:""},domProps:{value:t.address2},on:{input:function(e){e.target.composing||(t.address2=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"uk-width-1-2@s"},[a("label",{staticClass:"uk-form-label"},[t._v("Alternate Ship to 2")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.address3,expression:"address3"}],staticClass:"uk-input",attrs:{type:"text",placeholder:""},domProps:{value:t.address3},on:{input:function(e){e.target.composing||(t.address3=e.target.value)}}})])])]),t._v(" "),a("button",{staticClass:"uk-button uk-button-primary uk-width-1-3@m uk-width-1-1@s uk-align-center uk-margin-bottom"},[t._v(" Сохранить ")])])])])])])])]),t._v(" "),a("div",{staticClass:"uk-card-default uk-card-small uk-card-hover"},[a("div",{staticClass:"uk-card-header"},[a("div",{staticClass:"uk-grid uk-grid-small"},[a("div",{staticClass:"uk-width-expand"},[a("div",{staticClass:"uk-inline uk-width-1-1"},[a("span",{staticClass:"uk-form-icon uk-form-icon-flip",attrs:{"data-uk-icon":"icon: search"}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],staticClass:"uk-input uk-width-1-1 search-fld",attrs:{type:"text",placeholder:"Поиск по Имени"},domProps:{value:t.val},on:{input:[function(e){e.target.composing||(t.val=e.target.value)},function(e){return t.filter(t.val)}]}})])])])]),t._v(" "),a("div",{staticClass:"uk-card-body uk-margin-medium-bottom uk-padding-remove-top"},[a("div",{staticClass:"form-container uk-overflow-auto"},[a("table",{staticClass:"uk-table uk-table-hover uk-table-middle uk-table-divider",staticStyle:{"background-color":"white"}},[t._m(0),t._v(" "),t._l(t.results,(function(e,s){return a("tbody",{attrs:{id:e.id}},[a("tr",[a("td",[t._v(t._s(s+1))]),t._v(" "),a("td",[t._v(t._s(e.name||"-"))]),t._v(" "),a("td",{staticClass:"uk-text-nowrap"},[t._v(t._s(e.address||"-"))]),t._v(" "),a("td",{staticClass:"uk-text-truncate"},[t._v(t._s(e.address1||"-"))]),t._v(" "),a("td",[t._v(t._s(e.email||"-"))]),t._v(" "),a("td",[t._v(t._s(e.phone||"-"))]),t._v(" "),a("td",[t._v(t._s(e.code||"-"))]),t._v(" "),a("td",[t._v(t._s(e.contact||"-"))]),t._v(" "),a("td",[a("ul",{staticClass:"uk-iconnav"},[a("li",[a("a",{attrs:{"uk-icon":"icon: file-edit","uk-tooltip":"Редактировать"},on:{click:function(a){return a.preventDefault(),t.show(e)}}})]),t._v(" "),a("li",[a("a",{attrs:{"uk-icon":"icon: trash","uk-tooltip":"title: Удалить; pos: bottom"},on:{click:function(a){return a.preventDefault(),t.deleteClients(e.id,s)}}})])])])])])}))],2)])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"uk-table-shrink"},[t._v("#")]),t._v(" "),a("th",{},[t._v("Customer Name")]),t._v(" "),a("th",{},[t._v("Bill to Address")]),t._v(" "),a("th",{},[t._v("Ship to Address")]),t._v(" "),a("th",{},[t._v("E-mail")]),t._v(" "),a("th",{},[t._v("Phone")]),t._v(" "),a("th",{},[t._v("Reference number")]),t._v(" "),a("th",{},[t._v("Primary contact")]),t._v(" "),a("th",{},[t._v("Действия")])])])}],!1,null,"2d4df057",null).exports}}]);