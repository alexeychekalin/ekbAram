"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[872],{6872:(t,i,a)=>{a.r(i),a.d(i,{default:()=>e});const s={name:"AllParts",data:function(){return{pn:"",description:"",result:"",results:[],allresults:[],val:"",id:"",fields:{ID:"id","P/N":"pn",Описание:"description"}}},methods:{getParts:function(){var t=this;axios.get("/api/parts",{withCredentials:!0}).then((function(i){t.$data.results=i.data,t.$data.allresults=i.data}))},filter:function(t){var i,a=this;if(""===t)this.results=this.allresults;else{this.results=this.allresults;this.results=(i=t,a.$data.results.filter((function(t){return t.pn.toLowerCase().indexOf(i.toLowerCase())>-1})))}},show:function(t){UIkit.modal("#modal-change").show(),this.id=t[0],this.pn=t[1],this.description=t[2]},updateParts:function(t){var i=this;axios.post("/api/parts/update",{id:this.id,pn:this.pn,description:this.description}).then((function(t){UIkit.notification({message:"Позиция обновлена"}),UIkit.modal("#modal-change").hide()})).catch((function(t){t.response.data;UIkit.notification({message:"Ошибка изменения. Обратитесь к администратору"})})).finally((function(){UIkit.modal("#modal-change").hide(),i.getParts()}))},deleteParts:function(t){var i=this;axios.post("/api/parts/delete",{id:t[0],pn:"null",description:"null"}).then((function(t){UIkit.notification({message:"Позиция удалена"})})).catch((function(t){t.response.data;UIkit.notification({message:"Ошибка удаления. Обратитесь к администратору"})})).finally((function(){UIkit.modal("#modal-change").hide(),i.getUsers()}))}},mounted:function(){this.getParts()}};const e=(0,a(1900).Z)(s,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"uk-width-1-1 uk-padding uk-padding-remove-top"},[a("h1",{staticClass:"uk-text-center"},[t._v("Список всех позиций")]),t._v(" "),a("div",{attrs:{id:"modal-change","uk-modal":""}},[a("div",{staticClass:"uk-modal-dialog uk-modal-body uk-margin-auto-vertical"},[a("div",{staticClass:"uk-margin uk-modal-container-large"},[a("h3",{staticClass:"uk-card-title"},[t._v("Редактирование позиции")]),t._v(" "),a("div",{staticClass:"uk-grid-small",attrs:{"uk-grid":""}},[a("form",{staticClass:"uk-width-1-1",on:{submit:function(i){return i.preventDefault(),t.updateParts()}}},[a("div",{staticClass:"uk-grid-match uk-child-width-1-1@s",attrs:{"uk-grid":""}},[a("div",[a("div",{staticClass:"uk-card-default uk-card-body"},[a("div",{staticClass:"uk-grid-small",attrs:{"uk-grid":""}},[a("div",{staticClass:"uk-width-1-4@s"},[a("label",{staticClass:"uk-form-label"},[t._v("P/N")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pn,expression:"pn"}],staticClass:"uk-input",attrs:{type:"text",placeholder:"",required:""},domProps:{value:t.pn},on:{input:function(i){i.target.composing||(t.pn=i.target.value)}}})]),t._v(" "),a("div",{staticClass:"uk-width-3-4@s"},[a("label",{staticClass:"uk-form-label"},[t._v("Описание")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"uk-input",attrs:{type:"text",placeholder:""},domProps:{value:t.description},on:{input:function(i){i.target.composing||(t.description=i.target.value)}}})])])]),t._v(" "),a("button",{staticClass:"uk-button uk-button-primary uk-width-1-3@m uk-width-1-1@s uk-align-center uk-margin-bottom"},[t._v(" Сохранить ")])])])])])])])]),t._v(" "),a("div",{staticClass:"uk-card-default uk-card-small uk-card-hover"},[a("div",{staticClass:"uk-card-header"},[a("div",{staticClass:"uk-grid uk-grid-small"},[a("div",{staticClass:"uk-width-expand"},[a("div",{staticClass:"uk-inline uk-width-1-1"},[a("span",{staticClass:"uk-form-icon uk-form-icon-flip",attrs:{"data-uk-icon":"icon: search"}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],staticClass:"uk-input uk-width-1-1 search-fld",attrs:{type:"text",placeholder:"Поиск по P/N"},domProps:{value:t.val},on:{input:[function(i){i.target.composing||(t.val=i.target.value)},function(i){return t.filter(t.val)}]}})])])])]),t._v(" "),a("div",{staticClass:"uk-card-body uk-margin-medium-bottom uk-padding-remove-top"},[a("div",{staticClass:"form-container uk-overflow-auto"},[a("table",{staticClass:"uk-table uk-table-hover uk-table-middle uk-table-divider",staticStyle:{"background-color":"white"}},[t._m(0),t._v(" "),t._l(t.results,(function(i,s){return a("tbody",{attrs:{id:i.id}},[a("tr",[a("td",[t._v(t._s(s+1))]),t._v(" "),a("td",[t._v(t._s(i.pn||"-"))]),t._v(" "),a("td",{staticClass:"uk-text-nowrap"},[t._v(t._s(i.description||"-"))]),t._v(" "),a("td",[a("ul",{staticClass:"uk-iconnav"},[a("li",[a("a",{attrs:{"uk-icon":"icon: file-edit","uk-tooltip":"Редактировать"},on:{click:function(a){return a.preventDefault(),t.show([i.id,i.pn,i.description])}}})]),t._v(" "),a("li",[a("a",{attrs:{"uk-icon":"icon: trash","uk-tooltip":"title: Удалить; pos: bottom"},on:{click:function(a){return a.preventDefault(),t.deleteParts([i.id,i.ph,i.description])}}})])])])])])}))],2)])])])])}),[function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("thead",[a("tr",[a("th",{staticClass:"uk-table-shrink"},[t._v("#")]),t._v(" "),a("th",{},[t._v("P/N")]),t._v(" "),a("th",{},[t._v("Описание")]),t._v(" "),a("th",{},[t._v("Действия")])])])}],!1,null,"219bf85f",null).exports}}]);